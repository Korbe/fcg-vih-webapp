import{e as a,o as l,a as t,d,k as H,z as P,f as v,b as p,u as m,t as u,i as x,g as b,F as S,W as M}from"./app-BFKLGNOn.js";function $(o,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z"})])}function Z(o,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function z(o,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z","clip-rule":"evenodd"})])}function I(o,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z","clip-rule":"evenodd"})])}const O=o=>{let s=0;for(let e=0,c=o.length;e<c;e++){let i=o.charCodeAt(e);s=(s<<5)-s+i,s|=0}return s},E={class:"z-10 pb-3 md:pb-0 flex-shrink-0"},J=["alt","src"],R={class:"z-10 basis-full w-full md:pl-4"},W={key:0,class:"text-brand-primary flex"},F={class:"text-xl md:text-2xl font-medium text-gray-900"},D={class:"py-3 text-base text-gray-500"},L={class:"font-medium hover:underline"},U={class:"text-gray-600"},Y={key:0,class:"z-10 w-full sm:flex flex-end md:justify-end sm:justify-center"},q={class:"flex space-x-2"},G=["id"],K={class:"inline-block"},Q={class:"inline-block"},X=["id"],ee=["src"],re={__name:"PostAudioPlayer",props:{post:Object,index:Number},setup(o){const s=o,e=d(null),c=d(null),i=d(!1),w=d(!1),y=d(null),f=d(null),k=H(()=>`audio_${s.index}`);P(()=>{e.value=document.getElementById(k.value),(JSON.parse(localStorage.getItem("completion-hist"))??[]).includes(g())&&(i.value=!0)});const _=n=>{e.value&&(e.value.currentTime+=n)},j=()=>{e.value.paused?(i.value=!1,e.value.play(),C()):e.value.pause()},A=()=>{if(!e.value)return;let{currentTime:n,duration:r}=e.value,h=(Math.floor(n%60)<10?"0":"")+Math.floor(n%60),N=Math.floor(n/60);c.value=`${N}:${h} / ${Math.floor(r/60)}:${Math.floor(r%60).toString().padStart(2,"0")}`;let V=n/r;f.value.style.width=`${Math.round(y.value.offsetWidth*V)}px`},g=()=>O(`${s.post.author}.${s.post.title}`),B=()=>{if(e.value){e.value.pause(),e.value.currentTime=0,i.value=!0,f.value&&(f.value.style.width="0px"),T();let n=JSON.parse(localStorage.getItem("completion-hist"))??[];n.includes(g())||localStorage.setItem("completion-hist",JSON.stringify([...n,g()]))}},C=()=>{w.value||(M.post(route("public.blog.post.viewed",s.post.id),null,{preserveScroll:!0}),w.value=!0)},T=()=>{M.post(route("public.blog.post.completed",s.post.id),null,{preserveScroll:!0})};return(n,r)=>(l(),a("div",{ref_key:"wrapper",ref:y,class:"relative flex flex-col sm:flex-row text-center rounded-lg border border-gray-300 bg-white px-2 md:px-6 py-5 items-center justify-center md:text-left md:justify-between shadow-sm hover:border-brand-primary focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-brand-primary"},[t("div",{ref_key:"progressBox",ref:f,class:"rounded-l-lg h-full absolute w-0 inset-0 bg-brand-primary-100"},null,512),t("div",E,[t("img",{loading:"lazy",alt:o.post.author,src:o.post.author_image,class:"relative rounded-full h-16 w-16"},null,8,J)]),t("div",R,[i.value?(l(),a("p",W,[p(m(Z),{class:"h-7 mr-1"}),r[3]||(r[3]=t("span",{class:"inline-block"},u("Angehört"),-1))])):v("",!0),t("p",F,u(o.post.title),1),t("p",D,[t("span",L,u(o.post.author),1),t("span",U," · "+u(o.post.published_at),1)])]),o.post.audio&&e.value?(l(),a("div",Y,[t("div",q,[e.value.currentTime>0?(l(),a("a",{key:0,class:"p-2 flex items-center justify-center border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:r[0]||(r[0]=x(h=>_(-10),["prevent"]))},[p(m($),{class:"h-7 mr-1"}),r[4]||(r[4]=b(" 10s "))])):v("",!0),t("a",{id:"play_button_"+o.index,class:"p-2 flex items-center justify-center w-full border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:r[1]||(r[1]=x(h=>j(),["prevent"]))},[e.value.paused?(l(),a(S,{key:0},[p(m(I),{class:"h-7 mr-1"}),t("span",K,u(c.value??"Abspielen"),1)],64)):(l(),a(S,{key:1},[p(m(z),{class:"h-7 mr-1"}),t("span",Q,u(c.value??"Pause"),1)],64))],8,G),e.value.currentTime>0?(l(),a("a",{key:1,class:"p-2 flex items-center justify-center border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:r[2]||(r[2]=x(h=>_(60),["prevent"]))},[r[5]||(r[5]=b(" 1min ")),p(m($),{class:"rotate-180 h-7 ml-1"})])):v("",!0)])])):v("",!0),t("audio",{id:k.value,ref_key:"audioRef",ref:e,onTimeupdate:A,onEnded:B},[t("source",{src:o.post.audio,type:"audio/mp3"},null,8,ee),r[6]||(r[6]=b(" Your browser does not support the audio tag. "))],40,X)],512))}};export{re as _};
//# sourceMappingURL=PostAudioPlayer-DfaxdKUY.js.map
