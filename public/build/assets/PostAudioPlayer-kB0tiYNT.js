import{e as a,o as l,a as t,d,k as H,z as I,f as v,b as p,u as f,t as u,i as x,g as b,F as S,W as M}from"./app-BzqhmKds.js";function $(r,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z"})])}function P(r,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function Z(r,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z","clip-rule":"evenodd"})])}function z(r,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z","clip-rule":"evenodd"})])}const E=r=>{let s=0;for(let e=0,c=r.length;e<c;e++){let i=r.charCodeAt(e);s=(s<<5)-s+i,s|=0}return s},O={class:"z-10 pb-3 md:pb-0 flex-shrink-0"},R=["alt","src"],J={class:"z-10 basis-full w-full md:pl-4"},W={key:0,class:"text-brand-primary flex"},D={class:"text-xl md:text-2xl font-medium text-gray-900"},F={class:"py-3 text-base text-gray-500"},U={class:"font-medium hover:underline"},L={class:"text-gray-600"},Y={key:0,class:"z-10 w-full sm:flex flex-end md:justify-end sm:justify-center"},q={class:"flex space-x-2"},G=["id"],K={class:"inline-block"},Q={class:"inline-block"},X=["id"],ee=["src"],oe={__name:"PostAudioPlayer",props:{post:Object,index:Number},setup(r){const s=r,e=d(null),c=d(null),i=d(!1),w=d(!1),y=d(null),m=d(null),k=H(()=>`audio_${s.index}`);I(()=>{e.value=document.getElementById(k.value),(JSON.parse(localStorage.getItem("completion-hist"))??[]).includes(g())&&(i.value=!0)});const _=n=>{e.value&&(e.value.currentTime+=n)},B=()=>{e.value.paused?(i.value=!1,e.value.play(),A()):e.value.pause()},C=()=>{if(!e.value)return;let{currentTime:n,duration:o}=e.value,h=(Math.floor(n%60)<10?"0":"")+Math.floor(n%60),N=Math.floor(n/60);c.value=`${N}:${h} / ${Math.floor(o/60)}:${Math.floor(o%60).toString().padStart(2,"0")}`;let V=n/o;m.value.style.width=`${Math.round(y.value.offsetWidth*V)}px`},g=()=>E(`${s.post.author}.${s.post.title}`),j=()=>{if(e.value){e.value.pause(),e.value.currentTime=0,i.value=!0,m.value&&(m.value.style.width="0px"),T();let n=JSON.parse(localStorage.getItem("completion-hist"))??[];n.includes(g())||localStorage.setItem("completion-hist",JSON.stringify([...n,g()]))}},A=()=>{w.value||(M.post(route("public.blog.post.viewed",s.post.id),null,{preserveScroll:!0}),w.value=!0)},T=()=>{M.post(route("public.blog.post.completed",s.post.id),null,{preserveScroll:!0})};return(n,o)=>(l(),a("div",{ref_key:"wrapper",ref:y,class:"relative flex flex-col sm:flex-row text-center rounded-lg border border-gray-300 bg-white px-2 md:px-6 py-5 items-center justify-center md:text-left md:justify-between shadow-sm hover:border-brand-primary focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-brand-primary transform transition-transform duration-300 ease-in-out hover:scale-105 overflow-hidden group"},[t("div",{ref_key:"progressBox",ref:m,class:"rounded-l-lg h-full absolute w-0 inset-0 bg-brand-primary-100"},null,512),t("div",O,[t("img",{loading:"lazy",alt:r.post.author,src:r.post.photo??"https://ui-avatars.com/api/?name="+encodeURIComponent(r.post.author)+"&color=0DB3E9&background=edfbff",class:"relative rounded-full h-24 w-24 transition-transform duration-300 ease-in-out group-hover:scale-125"},null,8,R)]),t("div",J,[i.value?(l(),a("p",W,[p(f(P),{class:"h-7 mr-1"}),o[3]||(o[3]=t("span",{class:"inline-block"},u("Angehört"),-1))])):v("",!0),t("p",D,u(r.post.title),1),t("p",F,[t("span",U,u(r.post.author),1),t("span",L," · "+u(r.post.published_at),1)])]),r.post.audio&&e.value?(l(),a("div",Y,[t("div",q,[e.value.currentTime>0?(l(),a("a",{key:0,class:"p-2 flex items-center justify-center border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:o[0]||(o[0]=x(h=>_(-10),["prevent"]))},[p(f($),{class:"h-7 mr-1"}),o[4]||(o[4]=b(" 10s "))])):v("",!0),t("a",{id:"play_button_"+r.index,class:"p-2 flex items-center justify-center w-full border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:o[1]||(o[1]=x(h=>B(),["prevent"]))},[e.value.paused?(l(),a(S,{key:0},[p(f(z),{class:"h-7 mr-1"}),t("span",K,u(c.value??"Abspielen"),1)],64)):(l(),a(S,{key:1},[p(f(Z),{class:"h-7 mr-1"}),t("span",Q,u(c.value??"Pause"),1)],64))],8,G),e.value.currentTime>0?(l(),a("a",{key:1,class:"p-2 flex items-center justify-center border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:o[2]||(o[2]=x(h=>_(60),["prevent"]))},[o[5]||(o[5]=b(" 1min ")),p(f($),{class:"rotate-180 h-7 ml-1"})])):v("",!0)])])):v("",!0),t("audio",{id:k.value,ref_key:"audioRef",ref:e,onTimeupdate:C,onEnded:j},[t("source",{src:r.post.audio,type:"audio/mp3"},null,8,ee),o[6]||(o[6]=b(" Your browser does not support the audio tag. "))],40,X)],512))}};export{oe as _};
//# sourceMappingURL=PostAudioPlayer-kB0tiYNT.js.map
