import{e as n,o,a as r,W as C,q as c,f as i,b as h,t as u,i as w,g as p,F as v,c as y,w as b,h as I}from"./app-cCdzfRtO.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as S,r as P}from"./ChevronRightIcon-CWw2jmwK.js";function R(s,e){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z"})])}function B(s,e){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function M(s,e){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z","clip-rule":"evenodd"})])}function j(s,e){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z","clip-rule":"evenodd"})])}const T=s=>{let e=0;for(let t=0,f=s.length;t<f;t++){let a=s.charCodeAt(t);e=(e<<5)-e+a,e|=0}return e},A={components:{PlayIcon:j,PauseIcon:M,BackwardIcon:R,CheckBadgeIcon:B},name:"PostAudioPlayer",props:{post:{type:Object},index:{type:Number}},mounted(){this.audio_id="audio_"+this.index,this.audioRef=this.$refs.audioRef;let s=JSON.parse(localStorage.getItem("completion-hist"))??[];s&&s.includes(this.getHash())&&(this.completed=!0)},data(){return{audioRef:null,songTime:null,completed:!1,audio_id:"",viewStatRecorded:!1}},methods:{songActive(){},addSeconds(s){this.audioRef.currentTime+=s},playPause(){this.audioRef.paused?(this.songActive(),this.completed=!1,this.audioRef.play(),this.SetPostViewed()):this.audioRef.pause()},onTimeUdate(){let{currentTime:s,duration:e}=this.audioRef,t=(Math.floor(s%60)<10?"0":"")+Math.floor(s%60),f=Math.floor(s/60);this.songTime=f+":"+t+" / "+Math.floor(e/60)+":"+(Math.floor(e%60)<10?"0":"")+Math.floor(e%60);let a=s/e,d=Math.round(this.$refs.wrapper.offsetWidth*a);this.$refs.progressBox.style.width=d+"px"},getHash(){return T(this.post.author+"."+this.post.title)},onEnded(){this.audioRef.pause(),this.audioRef.currentTime=0,this.completed=!0,this.$refs.progressBox.style.width="0px",this.SetPostCompleted();let s=JSON.parse(localStorage.getItem("completion-hist"))??[];s.includes(this.getHash())||localStorage.setItem("completion-hist",JSON.stringify([...s,this.getHash()]))},SetPostViewed(){this.viewStatRecorded||(C.post(route("public.blog.post.viewed",this.post.id),null,{preserveScroll:!0}),this.viewStatRecorded=!0)},SetPostCompleted(){C.post(route("public.blog.post.completed",this.post.id),null,{preserveScroll:!0})}}},H={ref:"wrapper",class:"relative flex flex-col sm:flex-row text-center rounded-lg border border-gray-300 bg-white px-2 md:px-6 py-5 items-center justify-center md:text-left md:justify-between shadow-sm hover:border-brand-primary focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-brand-primary"},L={ref:"progressBox",class:"rounded-l-lg h-full absolute w-0 inset-0 bg-brand-primary-100"},N={class:"z-10 pb-3 md:pb-0 flex-shrink-0"},V=["alt","src"],O={class:"z-10 basis-full w-full md:pl-4"},Z={key:0,class:"text-brand-primary flex"},E={class:"text-xl md:text-2xl font-medium text-gray-900"},z={class:"py-3 text-base text-gray-500"},W={class:"font-medium hover:underline"},J={class:"text-gray-600"},U={key:0,class:"z-10 w-full sm:flex flex-end md:justify-end sm:justify-center"},F={class:"flex space-x-2"},q=["id"],D={class:"inline-block"},Y={class:"inline-block"},G=["id"],K=["src"];function Q(s,e,t,f,a,d){const g=c("CheckBadgeIcon"),l=c("BackwardIcon"),_=c("PlayIcon"),x=c("PauseIcon");return o(),n("div",H,[r("div",L,null,512),r("div",N,[r("img",{loading:"lazy",alt:t.post.author,src:t.post.author_image,class:"relative rounded-full h-16 w-16"},null,8,V)]),r("div",O,[a.completed?(o(),n("p",Z,[h(g,{class:"h-7 mr-1"}),e[5]||(e[5]=r("span",{class:"inline-block"},u("Angehört"),-1))])):i("",!0),r("p",E,u(t.post.title),1),r("p",z,[r("span",W,u(t.post.author),1),r("span",J," · "+u(t.post.published_at),1)])]),t.post.audio&&a.audioRef?(o(),n("div",U,[r("div",F,[a.audioRef.currentTime>0?(o(),n("a",{key:0,class:"p-2 flex items-center justify-center border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:e[0]||(e[0]=w(m=>d.addSeconds(-10),["prevent"]))},[h(l,{class:"h-7 mr-1"}),e[6]||(e[6]=p(" 10s "))])):i("",!0),r("a",{id:"play_button_"+t.index,class:"p-2 flex items-center justify-center w-full border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:e[1]||(e[1]=w(m=>d.playPause(),["prevent"]))},[a.audioRef.paused?(o(),n(v,{key:0},[h(_,{class:"h-7 mr-1"}),r("span",D,u(a.songTime??"Abspielen"),1)],64)):(o(),n(v,{key:1},[h(x,{class:"h-7 mr-1"}),r("span",Y,u(a.songTime??"Pause"),1)],64))],8,q),a.audioRef.currentTime>0?(o(),n("a",{key:1,class:"p-2 flex items-center justify-center border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-brand-primary hover:bg-brand-secondary-400",href:"#",onClick:e[2]||(e[2]=w(m=>d.addSeconds(60),["prevent"]))},[e[7]||(e[7]=p(" 1min ")),h(l,{class:"rotate-180 h-7 ml-1"})])):i("",!0)])])):i("",!0),r("audio",{id:a.audio_id,ref:"audioRef",onTimeupdate:e[3]||(e[3]=(...m)=>d.onTimeUdate&&d.onTimeUdate(...m)),onEnded:e[4]||(e[4]=(...m)=>d.onEnded&&d.onEnded(...m))},[r("source",{src:t.post.audio,type:"audio/mp3"},null,8,K),e[8]||(e[8]=p(" Your browser does not support the audio tag. "))],40,G)],512)}const X=k(A,[["render",Q]]),$={name:"Pagination",components:{ChevronLeftIcon:P,ChevronRightIcon:S},props:{data:Object}},ee={class:"py-5 border-t border-gray-200 flex items-center justify-between sm:px-0"},te={class:"-mt-px w-0 flex-1 flex"},re={key:0,class:"hidden md:-mt-px md:flex"},oe={key:1,class:"text-gray-500 pt-4 px-4 inline-flex items-center font-medium"},se={"aria-current":"page",class:"border-brand-primary-500 text-brand-primary-600 border-t-2 pt-4 px-4 inline-flex items-center font-medium"},ne={key:2,class:"text-gray-500 pt-4 px-4 inline-flex items-center font-medium"},ae={class:"-mt-px w-0 flex-1 flex justify-end"};function ie(s,e,t,f,a,d){const g=c("ChevronLeftIcon"),l=c("Link"),_=c("ChevronRightIcon");return o(),n("nav",ee,[r("div",te,[t.data.current_page>1?(o(),y(l,{key:0,href:t.data.prev_page_url,class:"border-t-2 border-transparent pt-4 pr-1 inline-flex items-center font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300","preserve-scroll":""},{default:b(()=>[h(g,{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400"}),e[0]||(e[0]=p(" Zurück "))]),_:1},8,["href"])):i("",!0)]),t.data.last_page>1?(o(),n("div",re,[t.data.current_page>1?(o(),y(l,{key:0,href:t.data.first_page_url,class:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 border-t-2 pt-4 px-4 inline-flex items-center font-medium","preserve-scroll":""},{default:b(()=>e[1]||(e[1]=[p(" 1 ")])),_:1},8,["href"])):i("",!0),t.data.current_page==t.data.last_page?(o(),n("span",oe," ... ")):i("",!0),r("span",se,u(t.data.current_page),1),t.data.current_page<t.data.last_page?(o(),n("span",ne," ... ")):i("",!0),t.data.current_page<t.data.last_page?(o(),y(l,{key:3,href:t.data.last_page_url,class:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 border-t-2 pt-4 px-4 inline-flex items-center font-medium","preserve-scroll":""},{default:b(()=>[p(u(t.data.last_page),1)]),_:1},8,["href"])):i("",!0)])):i("",!0),r("div",ae,[t.data.current_page<t.data.last_page?(o(),y(l,{key:0,href:t.data.next_page_url,class:"border-t-2 border-transparent pt-4 pl-1 inline-flex items-center text-base font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300","preserve-scroll":""},{default:b(()=>[e[2]||(e[2]=p(" Weiter ")),h(_,{"aria-hidden":"true",class:"ml-3 h-5 w-5 text-gray-400"})]),_:1},8,["href"])):i("",!0)])])}const de=k($,[["render",ie]]),le={name:"BlogList",props:{posts:Object},components:{PostAudioPlayer:X,Pagination:de}},ce={class:"grid grid-cols-1 gap-4"},ue={key:0,class:"text-center rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm hover:border-brand-primary focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-brand-primary"};function he(s,e,t,f,a,d){const g=c("post-audio-player"),l=c("pagination");return o(),n(v,null,[r("div",ce,[(o(!0),n(v,null,I(t.posts.data,(_,x)=>(o(),y(g,{ref_for:!0,ref:"post"+x,key:x,index:x,post:_},null,8,["index","post"]))),128)),t.posts.total===0?(o(),n("div",ue," Noch keine Prediten ")):i("",!0)]),h(l,{data:t.posts},null,8,["data"])],64)}const ge=k(le,[["render",he]]);export{ge as B,X as P};
