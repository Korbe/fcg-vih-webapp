{"version":3,"file":"UpdateProfileInformationForm-BcxmZ2K8.js","sources":["../../../resources/js/Pages/Profile/Partials/UpdateProfileInformationForm.vue"],"sourcesContent":["<script setup>\nimport { ref } from 'vue';\nimport { Link, router, useForm } from '@inertiajs/vue3';\nimport ActionMessage from '@/Jetstream/ActionMessage.vue';\nimport FormSection from '@/Jetstream/FormSection.vue';\nimport InputError from '@/Jetstream/InputError.vue';\nimport InputLabel from '@/Jetstream/InputLabel.vue';\nimport PrimaryButton from '@/Jetstream/PrimaryButton.vue';\nimport SecondaryButton from '@/Jetstream/SecondaryButton.vue';\nimport TextInput from '@/Jetstream/TextInput.vue';\n\nconst props = defineProps({\n    user: Object,\n});\n\nconst form = useForm({\n    _method: 'PUT',\n    name: props.user.name,\n    email: props.user.email,\n    photo: null,\n});\n\nconst verificationLinkSent = ref(null);\nconst photoPreview = ref(null);\nconst photoInput = ref(null);\n\nconst updateProfileInformation = () => {\n    if (photoInput.value) {\n        form.photo = photoInput.value.files[0];\n    }\n\n    form.post(route('user-profile-information.update'), {\n        errorBag: 'updateProfileInformation',\n        preserveScroll: true,\n        onSuccess: () => clearPhotoFileInput(),\n    });\n};\n\nconst sendEmailVerification = () => {\n    verificationLinkSent.value = true;\n};\n\nconst selectNewPhoto = () => {\n    photoInput.value.click();\n};\n\nconst updatePhotoPreview = () => {\n    const photo = photoInput.value.files[0];\n\n    if (! photo) return;\n\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n        photoPreview.value = e.target.result;\n    };\n\n    reader.readAsDataURL(photo);\n};\n\nconst deletePhoto = () => {\n    router.delete(route('current-user-photo.destroy'), {\n        preserveScroll: true,\n        onSuccess: () => {\n            photoPreview.value = null;\n            clearPhotoFileInput();\n        },\n    });\n};\n\nconst clearPhotoFileInput = () => {\n    if (photoInput.value?.value) {\n        photoInput.value.value = null;\n    }\n};\n</script>\n\n<template>\n    <FormSection @submitted=\"updateProfileInformation\">\n        <template #title>\n            Profile Information\n        </template>\n\n        <template #description>\n            Update your account's profile information and email address.\n        </template>\n\n        <template #form>\n            <!-- Profile Photo -->\n            <div v-if=\"$page.props.jetstream.managesProfilePhotos\" class=\"col-span-6 sm:col-span-4\">\n                <!-- Profile Photo File Input -->\n                <input\n                    id=\"photo\"\n                    ref=\"photoInput\"\n                    type=\"file\"\n                    class=\"hidden\"\n                    @change=\"updatePhotoPreview\"\n                >\n\n                <InputLabel for=\"photo\" value=\"Photo\" />\n\n                <!-- Current Profile Photo -->\n                <div v-show=\"! photoPreview\" class=\"mt-2\">\n                    <img :src=\"user.profile_photo_url\" :alt=\"user.name\" class=\"rounded-full size-20 object-cover\">\n                </div>\n\n                <!-- New Profile Photo Preview -->\n                <div v-show=\"photoPreview\" class=\"mt-2\">\n                    <span\n                        class=\"block rounded-full size-20 bg-cover bg-no-repeat bg-center\"\n                        :style=\"'background-image: url(\\'' + photoPreview + '\\');'\"\n                    />\n                </div>\n\n                <SecondaryButton class=\"mt-2 me-2\" type=\"button\" @click.prevent=\"selectNewPhoto\">\n                    Select A New Photo\n                </SecondaryButton>\n\n                <SecondaryButton\n                    v-if=\"user.profile_photo_path\"\n                    type=\"button\"\n                    class=\"mt-2\"\n                    @click.prevent=\"deletePhoto\"\n                >\n                    Remove Photo\n                </SecondaryButton>\n\n                <InputError :message=\"form.errors.photo\" class=\"mt-2\" />\n            </div>\n\n            <!-- Name -->\n            <div class=\"col-span-6 sm:col-span-4\">\n                <InputLabel for=\"name\" value=\"Name\" />\n                <TextInput\n                    id=\"name\"\n                    v-model=\"form.name\"\n                    type=\"text\"\n                    class=\"mt-1 block w-full\"\n                    required\n                    autocomplete=\"name\"\n                />\n                <InputError :message=\"form.errors.name\" class=\"mt-2\" />\n            </div>\n\n            <!-- Email -->\n            <div class=\"col-span-6 sm:col-span-4\">\n                <InputLabel for=\"email\" value=\"Email\" />\n                <TextInput\n                    id=\"email\"\n                    v-model=\"form.email\"\n                    type=\"email\"\n                    class=\"mt-1 block w-full\"\n                    required\n                    autocomplete=\"username\"\n                />\n                <InputError :message=\"form.errors.email\" class=\"mt-2\" />\n\n                <div v-if=\"$page.props.jetstream.hasEmailVerification && user.email_verified_at === null\">\n                    <p class=\"text-sm mt-2\">\n                        Your email address is unverified.\n\n                        <Link\n                            :href=\"route('verification.send')\"\n                            method=\"post\"\n                            as=\"button\"\n                            class=\"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary-500\"\n                            @click.prevent=\"sendEmailVerification\"\n                        >\n                            Click here to re-send the verification email.\n                        </Link>\n                    </p>\n\n                    <div v-show=\"verificationLinkSent\" class=\"mt-2 font-medium text-sm text-green-600\">\n                        A new verification link has been sent to your email address.\n                    </div>\n                </div>\n            </div>\n        </template>\n\n        <template #actions>\n            <ActionMessage :on=\"form.recentlySuccessful\" class=\"me-3\">\n                Saved.\n            </ActionMessage>\n\n            <PrimaryButton :class=\"{ 'opacity-25': form.processing }\" :disabled=\"form.processing\">\n                Save\n            </PrimaryButton>\n        </template>\n    </FormSection>\n</template>\n"],"names":["props","__props","form","useForm","verificationLinkSent","ref","photoPreview","photoInput","updateProfileInformation","clearPhotoFileInput","sendEmailVerification","selectNewPhoto","updatePhotoPreview","photo","reader","e","deletePhoto","router","_a"],"mappings":"i4BAWA,MAAMA,EAAQC,EAIRC,EAAOC,EAAQ,CACjB,QAAS,MACT,KAAMH,EAAM,KAAK,KACjB,MAAOA,EAAM,KAAK,MAClB,MAAO,IACX,CAAC,EAEKI,EAAuBC,EAAI,IAAI,EAC/BC,EAAeD,EAAI,IAAI,EACvBE,EAAaF,EAAI,IAAI,EAErBG,EAA2B,IAAM,CAC/BD,EAAW,QACXL,EAAK,MAAQK,EAAW,MAAM,MAAM,CAAC,GAGzCL,EAAK,KAAK,MAAM,iCAAiC,EAAG,CAChD,SAAU,2BACV,eAAgB,GAChB,UAAW,IAAMO,EAAqB,CAC9C,CAAK,CACL,EAEMC,EAAwB,IAAM,CAChCN,EAAqB,MAAQ,EACjC,EAEMO,EAAiB,IAAM,CACzBJ,EAAW,MAAM,MAAO,CAC5B,EAEMK,EAAqB,IAAM,CAC7B,MAAMC,EAAQN,EAAW,MAAM,MAAM,CAAC,EAEtC,GAAI,CAAEM,EAAO,OAEb,MAAMC,EAAS,IAAI,WAEnBA,EAAO,OAAUC,GAAM,CACnBT,EAAa,MAAQS,EAAE,OAAO,MACjC,EAEDD,EAAO,cAAcD,CAAK,CAC9B,EAEMG,EAAc,IAAM,CACtBC,EAAO,OAAO,MAAM,4BAA4B,EAAG,CAC/C,eAAgB,GAChB,UAAW,IAAM,CACbX,EAAa,MAAQ,KACrBG,EAAqB,CACxB,CACT,CAAK,CACL,EAEMA,EAAsB,IAAM,QAC1BS,EAAAX,EAAW,QAAX,MAAAW,EAAkB,QAClBX,EAAW,MAAM,MAAQ,KAEjC"}